{"version":3,"file":"songs.component.js","sourceRoot":"","sources":["songs.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YA4BA;gBAII,wBACY,OAAe,EACf,YAAyB,EACzB,cAA6B;oBAF7B,YAAO,GAAP,OAAO,CAAQ;oBACf,iBAAY,GAAZ,YAAY,CAAa;oBACzB,mBAAc,GAAd,cAAc,CAAe;gBACzC,CAAC;gBAED,iCAAQ,GAAR;oBAAA,iBASC;oBARG,IAAI,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC7C,IAAI,CAAC,KAAK,GAAG,sBAAS,CAAC,MAAM,CAAC,UAAA,SAAS,IAAI,OAAA,SAAS,CAAC,EAAE,KAAK,EAAE,EAAnB,CAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;oBACzE,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,MAAM;wBACnC,KAAI,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC;wBAE9B,wCAAwC;wBACxC,KAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,CAAC,CAAC,CAAC;gBACP,CAAC;gBAED,iCAAQ,GAAR,UAAS,KAAK,EAAE,IAAI;oBAChB,EAAE,CAAC,CAAC,KAAK,CAAC;wBACN,KAAK,CAAC,cAAc,EAAE,CAAC;oBAE3B,IAAI,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;oBACjD,IAAI,WAAW,GAAG,KAAG,qBAAS,GAAG,IAAI,CAAC,UAAU,SAAI,gBAAgB,SAAM,CAAC;oBAC3E,IAAI,MAAM,GAAsB,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;oBACjE,MAAM,CAAC,GAAG,GAAG,WAAW,CAAC;oBACzB,MAAM,CAAC,IAAI,EAAE,CAAC;oBACd,MAAM,CAAC,IAAI,EAAE,CAAC;gBAClB,CAAC;gBApDL;oBAAC,gBAAS,CAAC;wBACP,QAAQ,EAAE,UAAU;wBACpB,QAAQ,EAAE,0YAUT;wBACD,MAAM,EAAE,CAAC,0EAIR,CAAC;wBACF,UAAU,EAAE,CAAC,oCAAW,CAAC;qBAC5B,CAAC;;kCAAA;gBAkCF,qBAAC;YAAD,CAAC,AAhCD,IAgCC;YAhCD,2CAgCC,CAAA","sourcesContent":["import {Component, OnInit, ElementRef, Renderer} from 'angular2/core';\nimport {RouteParams, Router} from 'angular2/router';\nimport {AudioPlayer} from './html5-player.component';\nimport {ArtistService} from './artist.service';\nimport {SongsList} from './songs-mock';\nimport {songsRoot} from './constants';\n\n@Component({\n    selector: 'my-songs',\n    template: `\n        <ul class=\"list-group\">\n            <li *ngFor=\"#song of songs\" class=\"list-group-item\">\n                <a href=\"#\" (click)=\"playSong($event, song)\">\n                    <i class=\"glyphicon glyphicon-music\"></i>                \n                    {{song}}\n                </a>\n            </li>\n        </ul>        \n        <audio-player></audio-player>\n    `,\n    styles: [`\n        .glyphicon-music {\n            color: black;\n        }\n    `],\n    directives: [AudioPlayer]\n})\n\nexport class SongsComponent implements OnInit {\n    songs;\n    artistName;\n    \n    constructor(\n        private _router: Router, \n        private _routeParams: RouteParams, \n        private _artistService: ArtistService) {\n    }           \n    \n    ngOnInit() {\n        let id = Number(this._routeParams.get('id'));\n        this.songs = SongsList.filter(songslist => songslist.id === id)[0].songs;\n        this._artistService.get(id).then(artist => {\n            this.artistName = artist.name;\n            \n            // call playSong to autoplay when loaded\n            this.playSong(null, this.songs[0]);\n        });\n    }\n    \n    playSong(event, song) {\n        if (event)\n            event.preventDefault();\n\n        let adjustedSongName = song.replace(/\\s+/g, '-');\n        let audioSource = `${songsRoot}${this.artistName}/${adjustedSongName}.mp3`;\n        let player = <HTMLAudioElement> document.getElementById('audio');\n        player.src = audioSource;\n        player.load();\n        player.play();\n    }\n}"]}